# Exercise 4: Using Your Composite Action
#
# GOAL: Use the composite action you created to simplify a workflow
#
# Requirements:
# 1. Create a workflow triggered by push to 'test-workflows' branch
# 2. Create a job named 'test-composite-action'
# 3. Use your composite action: ./.github/actions/setup-node-project
# 4. Pass inputs:
#    - node-version: '22'
#    - working-directory: './components/web'
# 5. After using the action, add two more steps:
#    - Run tests (npm test)
#    - Echo the cache-hit output from your action
#
# HINTS:
# - Call composite action in steps (not jobs): uses: ./.github/actions/setup-node-project
# - Access outputs: ${{ steps.step-id.outputs.output-name }}
# - You'll need to give your composite action step an 'id:' to reference its outputs
#
# YOUR SOLUTION BELOW:
# ====================

name: Test Composite Action (Exercise 4)
on:
  push:
    branches: [test-workflows]

jobs:
  # TODO: Create 'test-composite-action' job here
  test-composite-action:
    runs-on: ubuntu-latest
    steps:
      - name: Setup Node Project
        id: setup-node-project
        uses: ./.github/actions/setup-node-project
        with:
          node-version: "22"
          working-directory: "${{ github.workspace }}/components/web"
      - name: Run tests
        run: npm test
      - name: Echo cache hit
        run: |
          echo "Cache hit: ${{ steps.setup-node-project.outputs.cache-hit }}"
