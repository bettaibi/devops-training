# Exercise 2: Matrix Strategies & Artifacts
#
# GOAL: Create a workflow that tests across multiple Node versions
#       and passes build artifacts to the deploy job
#
# Requirements:
# 1. Create a 'test' job that runs on Node 18, 20, and 22 using matrix strategy
#    - Checkout code
#    - Setup Node with the matrix version
#    - Install dependencies (npm ci)
#    - Run tests (npm test)
#
# 2. Create a 'build' job that:
#    - Runs AFTER all test matrix jobs pass
#    - Uses Node 22
#    - Builds the project (npm run build)
#    - Uploads the '.next' folder as an artifact named 'build-output'
#
# 3. Create a 'deploy' job that:
#    - Runs AFTER build job passes
#    - Downloads the 'build-output' artifact
#    - Echoes "Deploying build from artifact..."
#
# HINTS:
# - Use 'needs' to create job dependencies
# - Matrix syntax: strategy.matrix.node-version: [18, 20, 22]
# - Access matrix value: ${{ matrix.node-version }}
# - Upload action: actions/upload-artifact@v4
# - Download action: actions/download-artifact@v4
# - For artifact path, use: ${{ github.workspace }}/components/web/.next/
# - Don't forget: include-hidden-files: true
#
# Reference: Your completed exercise-01 for basic structure
#
# YOUR SOLUTION BELOW:
# ====================

name: Matrix & Artifacts (Exercise 2)
on:
  push:
    branches: [test-workflows]

jobs:
  # TODO: Create 'test' job with matrix strategy for Node 18, 20, 22

  # TODO: Create 'build' job that uploads .next folder as artifact

  # TODO: Create 'deploy' job that downloads and uses the artifact
